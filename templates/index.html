<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Go Slots</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script
      src="https://unpkg.com/htmx.org@2.0.4"
      integrity="sha384-HGfztofotfshcF7+8n44JQL2oJmowVChPTg48S+jvZoztPfvwD79OC/LTtG6dMp+"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </head>
  <body class="bg-[#0a192f] text-white">
    <div class="container mx-auto px-4 py-8">
      <h1 class="text-2xl font-bold text-center mb-4">Go Slots</h1>

      <div
        id="game-container"
        x-data="{ betAmount: 1 }"
        class="max-w-sm mx-auto bg-[#112240] rounded-xl p-6"
      >
        <!-- Win Message Area -->
        <div id="win-message"></div>

        <!-- Single Slot Grid -->
        <div id="slot-grid" class="grid grid-cols-3 gap-2 mb-6">
          {{range .Slots}}
          <div
            class="aspect-square bg-[#1e3a8a] rounded flex items-center justify-center text-xl font-bold"
          >
            {{.}}
          </div>
          {{end}}
        </div>

        <!-- Betting Controls -->
        <div class="flex gap-2 mb-4">
          <input
            type="number"
            x-model="betAmount"
            name="bet"
            class="flex-1 bg-[#1e3a8a] rounded px-3 py-2"
          />

          <button
            hx-post="/spin"
            hx-include="input[name='bet']"
            hx-target="#win-message"
            x-bind:disabled="betAmount < 1 || betAmount > {{.Balance}}"
            class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded"
          >
            SPIN
          </button>
        </div>

        <!-- Balance Display -->
        <div class="bg-[#1e3a8a] p-4 rounded text-center">
          <div class="text-sm text-gray-400">Balance</div>
          <div id="balance-display" class="text-2xl font-bold">
            ${{.Balance}}
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
